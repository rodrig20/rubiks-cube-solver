<!DOCTYPE html>
<html lang="pt">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="mobile-web-app-capable" content="yes">

	<title>Rubik's Cube</title>

	<link rel="stylesheet" href="css/style.css">
	<script src="js/oz.js"></script>
	<script src="js/css3.oz.js"></script>
	<script src="js/rubik.js"></script>
	<script src="js/quaternion.js"></script>
	<script src="js/custom.js"></script>
</head>

<body>

	<div class="main-container">
		<div class="button-container" id="button-container">
			<!-- Grupo de ações principais -->
			<div class="button-group">
				<div class="button-group-title">Ações Principais</div>
				<button onclick="solve()">Resolver</button>
				<button onclick="scramble()">Baralhar</button>
			</div>

			<!-- Grupo de configurações -->
			<div class="button-group">
				<div class="button-group-title">Estado do Cubo</div>
				<button onclick="resetOrientation()">Normalizar Orientação</button>
				<button onclick="scan()">Ler Cubo</button>
				<button onclick="reset()">Reset</button>
			</div>

			<!-- Grupo da sequência de movimentos -->
			<div class="sequence-group">
				<div class="button-group-title">Sequência de Movimentos</div>
				<input type="text" id="move-sequence" placeholder="Ex: R U R' U'">
				<button onclick="applyMoveSequence()">Aplicar Sequência</button>
			</div>
		</div>

		<div class="cube-container" id="cube-container">
			<h1>Rubik's Cube</h1>
			<!-- O cubo será renderizado aqui -->
		</div>
	</div>

	<div id="popup" class="popup hidden">
		<p>Escolhe uma cor:</p>
		<button class="color-btn" data-color="white" style="background:white; border:1px solid #ccc;">Branco</button>
		<button class="color-btn" data-color="yellow" style="background:yellow;">Amarelo</button>
		<button class="color-btn" data-color="red" style="background:red;">Vermelho</button>
		<button class="color-btn" data-color="orange" style="background:orange;">Laranja</button>
		<button class="color-btn" data-color="blue" style="background:blue; color:white;">Azul</button>
		<button class="color-btn" data-color="green" style="background:green; color:white;">Verde</button>
	  </div>

	<script>
		window.addEventListener('load', function () {
			getCube();
		});

		const popup = document.getElementById("popup");

		document.querySelectorAll(".cube").forEach(face => {
			face.addEventListener("click", (e) => {
				const rect = e.target.getBoundingClientRect();

				// posiciona o popup junto à div clicada
				popup.style.left = `${rect.left + window.scrollX}px`;
				popup.style.top = `${rect.bottom + window.scrollY}px`;

				popup.classList.remove("hidden");
			});
		});

		// Clicar fora fecha o popup
		document.addEventListener("click", (e) => {
		if (!popup.contains(e.target) && !e.target.classList.contains("face")) {
			popup.classList.add("hidden");
		}
		});
	</script>


</body>

</html>
